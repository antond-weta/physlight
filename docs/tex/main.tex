% SPDX-License-Identifier: Apache-2.0
% Copyright (c) Contributors to the PhysLight Project.
%
% !TeX TXS-program:compile = txs:///lualatex/[--shell-escape]
% !TeX TXS-program:bibliography = txs:///bibtex
% The line above instructs TeXStudio on how to compile this document correctly
% you still need TeXLive, Pygments and the fonts installed correctly
% 
% Tested with 
%  - texlive-2019
%  - pygments-2.3.1
%
% On Linux, these can be installed with something like
% $ sudo apt install texlive-full
% $ sudo apt install python3-pygments
%
% The document comes with makefiles, so (on linux/mac) you can build using simply
% $ make
%
% alternatively
% $ lualatex --shell-escape main.tex
% $ bibtex main
% $ lualatex --shell-escape main.tex
% $ lualatex --shell-escape main.tex
%
% Building on Windows should "just work"(TM) from inside TeXStudio because of 
% the "magic comments" above
%
% This document uses these fonts:
%  - Courier Prime (Google)
%  - Charmon (Google)
%  - Noto Sans (Google)
%  - DejaVu Sans Mono (Google)
%  - TeX Gyre Pagella (TeXLive)
% In parentheses you find a source for them
%
% Installing fonts in linux:
%  - download package
%  - unpack in some directory
%  - copy into /usr/local/share/fonts/<kind>/<familyname> (needs sudo)
%  - or alternatively into ~/.local/share/fonts/<kind>/<familyname> (no sudo)
%  - rebuild font cache (no sudo)
% example:
% > sudo mkdir /usr/local/share/fonts/opentype/charmonman/
% > sudo cp Charmonman-* /usr/local/share/fonts/opentype/charmonman/
% > fc-cache -f -v
%
% You can use the fc-list command to view font names on your system
% 
%
% to make pictures (not a very perfect process, tbh)
% use geogebra to make a diagram
%  - to Export choose: export to PGF/TikZ
%    - x units: 1.0, y units: 1.0
%    - setup x/y min/max to include the picture
%       (note this draws on the diagram the part that will be exported)
%    - press Generate PGF/TikZ code
%    - copy-paste the block \begin{tikzpicture} into the document
%    - do adjustments of various kinds of label positioning and formatting
%
% to install pygments on a mac
% sudo easy_install Pygments
%
% ifplatform and minted need --shell-escape
% \makeglossaries uses the shell for the glossary stuff
% \makeindex uses the texindy thing for the index
% use bibtex for the bibliography
\documentclass{physlight}

\usepackage{import}

\newcites{rad}{References}

\newcommand\MakeGlossaries{\makenoidxglossaries}
\newcommand\PrintGlossaries{\printnoidxglossaries}

\usetikzlibrary{arrows}

% get ourselves some colors
\definecolor{qqwuqq}{rgb}{0,0.39,0}
\definecolor{xdxdff}{rgb}{0.49,0.49,1}
\definecolor{uuuuuu}{rgb}{0.27,0.27,0.27}
\definecolor{eqeqeq}{rgb}{0.88,0.88,0.88}
\definecolor{uuuuuu}{rgb}{0.27,0.27,0.27}
\definecolor{qqqqff}{rgb}{0,0,1}
\definecolor{cqcqcq}{rgb}{0.75,0.75,0.75}
\definecolor{xdxdff}{rgb}{0.49,0.49,1}

% load the glossary into this file
\loadglsentries{glossary}

\MakeGlossaries

% disable the first-use flag for a few well-known acronyms
\glsunset{RGB}
\glsunset{sRGB}
\glsunset{XYZ}

% indices
%  unqualified entries
\makeindex[intoc,title=Index]
%  people
%\makeindex[name=persons,intoc,title=Index of names]

% our version number
\def\physLightVersion{v 1.2 - \today}

% set up XMP metadata and colors for links
\definecolor{hyperref-color}{rgb}{0.1,0.1,0.3}
\hypersetup{
	colorlinks,
	citecolor=hyperref-color,
	linkcolor=hyperref-color,
	urlcolor=hyperref-color,
	pdftitle={physLight - physical units in light transport},
	pdfauthor={Contributors to the PhysLight Project},
	pdflang={enâˆ’US},
	pdfkeywords={lighting, photometry, rendering, computer graphics},
    pdfcopyright = {Copyright (C) Contributors to the PhysLight Project},
    pdflicenseurl = {https://www.apache.org/licenses/LICENSE-2.0}
}

% mathbb R, for the real numbers
\def\R{\mathbb{R}}
% wrapper to insert URL's
\def\link#1{{\small\url{#1}}}
% used in tables to make the font small and slanted
\def\smsl{\footnotesize\sl}

% used for product names
\newcommand\productname[1]{\textit{#1}}
\newcommand\codename[1]{\texttt{#1}}
\newcommand\companyname[1]{\textsc{#1}}
\newcommand\acronym[1]{\textsc{\addfontfeature{LetterSpace=7.5}\lowercase{#1}}}

\newenvironment{inconstruction}[1][This section is under construction]{
\noindent
\let\oldunitlength\unitlength
\setlength{\unitlength}{.5in}
\begin{minipage}{\unitlength}
\begin{picture}(1,1)
    \put(0,0){\includegraphics[width=\unitlength]{figures/construction.pdf}}
\end{picture}
\end{minipage}\hfill
\begin{minipage}{\textwidth - \unitlength - 2em}
\vspace{1ex}
\begin{tcolorbox}[colback=green!5!white,colframe=green!75!black,title=#1]


}{
\end{tcolorbox}
\end{minipage}
\let\unitlength\oldunitlength
}


%\includeonly{sec_wcl}

\renewcommand{\d}{\mathop{}\!\mathrm{d}}

\newcommand{\todo}[1]{\begin{tcolorbox}[colback=red!5!white,colframe=red!75!black,title=TODO]{#1}\end{tcolorbox}}

\graphicspath{{figures/}}

\begin{document}
%\setacronymstyle{long-sc-short}
\begin{titlepage}
\begin{center}

{\fontsize{60}{72}\selectfont \physLight}\\[.3cm]

\textsf{\textit{\fontsize{24}{26.8}\addfontfeature{LetterSpace=-5}\selectfont physical units in light transport}}\\[1.5cm]

\vfill
\large
%\textit{Weta Digital Rendering Department}\\[1mm]
\textit{Copyright \copyright\ the Contributors of the PhysLight Project}\\[1mm]
\textit{Full source available at} \url{https://github.com/wetadigital/physlight}\\[1mm]

% \begin{minipage}{0.4\textwidth}
% \begin{flushleft} \large
% %\emph{Author:}\\
% Luca \textsc{Fascione}\\
% Sehera \textsc{Nawaz}
%
% \end{flushleft}
% \end{minipage}
% \begin{minipage}{0.4\textwidth}
% \begin{flushright} \large
% \textit{Weta Digital Rendering Department}
% \end{flushright}
% \end{minipage}

%\vspace{3mm}
\hrule \vspace{1mm}
\textsc{\large \physLightVersion}\\[0.5cm]

\end{center}
\end{titlepage}

\tableofcontents
\listoffigures
\listoftables
\include{sec_notations}

\part{Models \& Specification}\label{part:models}

\include{sec_intro}
\include{sec_imaging}
\include{sec_lighting}
\include{sec_calcsheets}

\part{Reference}\label{part:ref}

\include{sec_illuminants}
\include{sec_sensors}

\part{Appendices}\label{part:app}
\appendix

\include{sec_appendix}
\include{sec_implementation}
\include{sec_radiance}

%\printindex
%\indexprologue{This is a list of names}
%\printindex[persons]
\PrintGlossaries

% put this bibliography as a chapter
\bibliographystyle{plainnat}
\bibliography{bibliography}

\end{document}
