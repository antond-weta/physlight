% SPDX-License-Identifier: Apache-2.0
% Copyright (c) Contributors to the PhysLight Project.

\chapter{Notation and symbols}\label{ch:notation}
%\addcontentsline{toc}{chapter}{Notation}

This document makes extensive use of subscripts because we have quantities like 
\emph{flux} that can be measured in several ways (\emph{radiant flux}, \emph{spectral radiant flux},
\emph{luminous flux}, to give examples of quantities we have actually encountered) and we
want to pinpoint which one among these several perspectives we are considering at the present time,
while also suggesting that under a broader strokes perspective these are part of the same
kind of measurement.
This means that these subscripts will apply to several of these quantities: we've seen
\emph{luminous flux}, \emph{luminous energy}, \emph{luminous emittance} for example.
For this reason, in the table that follows, given that we want to draw attention to 
the subscript itself, and not to the specific symbol it happens to be attached to, 
we'll present it attached to an empty square like this: $\square_v$.

Because in this document there are many standard symbols and units sharing the
same symbol, we decided to always keep units inside square brackets to minimize chances of 
confusion. Note that in this respect we deviate from standard practice.

Many, if not the majority of, light transport quantities are actually functions, 
taking as arguments values that represent maybe a given position, or a direction, or a wavelength,
of particular interest, as the case might be. 
Normally we would put these argument to our functions in parentheses, for example in the expression 
$M_e(x)$. 
However in many cases being explicit about these dependencies adds a lot of typed material 
to our equations and ends up making their meaning more obscure because of the many symbols the reader 
has to scan through. 
This is a case where the benefit of added precision undermines what we think is a higher precedence goal
of clarity in communication.
For this reason, we have opted to omit arguments in complex expressions where the surrounding 
text makes it clear what the expression actually means. 
For example we would use expression like $\int f \d x$ in place of
$\int f(x) \d x$, when it's clear that $f$ is in fact a function of $x$.
The discussion of~\cref{eqn:imaging1} is a good example of this practice.

% another possibility is to use labelwidth=\widthof{\bfseries The longest label}
% but this would require us to update with a copy of our longest label
\begin{description}[leftmargin=!,labelwidth={5em}]
\item[ {$\square$} ] a placeholder to indicate the location of some symbol
\item[ {$[\square]$} ] square brackets indicate the contained symbol is a unit,
	brackets will be empty of \emph{pure numbers}
\item[ {$\square^\uparrow$} ] an arrow pointing up $\uparrow$ is used to indicate 
	exitant quantities, that is leaving the object or location
\item[ {$\square^\downarrow$} ] an arrow pointing down $\downarrow$ is used to indicate 
	incident quantities, that is arriving at the object or location

\item[ {$\delta\square$} ] a small, differential amount of $\square$

% our constants and names
\item[{$\Omega$}] a solid angle
\item[{$\omega$}] a direction, usually within the solid angle $\Omega$
\item[$S$] a light source, or the region where its light originates
\item[$R$] a light receiver, or the region where it receives light
\item[{$t\;[\unit\second]$} ] a time period
\item[$k_i$] imaging constant: scale factor between luminous exposure and pixel values
\item[$p^{img}$] location on the filmback or image plane
\item[$W_{pos}(p^{img})$] local response of the filmback
\item[$W_{col}(\lambda)$] spectral response of the filmback
\item[$W(p^{img},\lambda)$] film response function

\item[{$\lambda\;[\unit\meter]$} ] wavelength
\item[{$\nu\;[\unit\hertz]$} ] frequency

% general photography quantities and constants
\item[{$C$}] incident-light meter calibration constant $312.5 = 100 \sfrac{25}8$ for this document
\item[{$f$}] focal length
\item[{$N$}] aperture number
\item[{$o$}] focus distance
\item[{$\Delta t$}] exposure time
\item[{$S$}] film speed
\item[{$T_{cp}$}] \gls{CCT} of a white point
\item[{$N$}] aperture number



% from lighting standard vocabulary
\item[{$N_p\;[]$} ] number of photons
\item[{$Q_p\;[\unit\joule]$} ] energy of one photon
\item[{$Q_e\;[\unit\joule]$} ] radiant energy


% from SI
\item[{$h$} ] Planck's constant (see~\cite{bipm:si.2019})
\item[{$K_{cd}$} ] luminous efficacy of monochromatic radiation (see~\cite{bipm:si.2019})

\item[{$\unit\joule$} ] unit: joule, measures amounts of energy
\item[{$\unit\watt$} ] unit: watt, measures power, being energy per 
	unit of time $[\unit\watt] = [\unit{\joule\per\second}]$
\item[{$\unit\hertz$} ] unit: watt, measures power, being energy per 
	unit of time $[\unit\hertz] = [\unit{1\per\second}]$
\item[{$\unit\radian$} ] 	unit: radian, measures angles
\item[{$\unit\steradian$} ] unit: steradian, measures solid angles
                   
\end{description}

\paragraph{Vector-valued functions and integrals}

\begin{inconstruction}
	Explain the meaning of this expression
	\begin{displaymath}
		\begin{pmatrix}X\\Y\\Z\end{pmatrix}
		= \int_\Lambda S(\lambda)\; 
		\begin{pmatrix}
			\bar x(\lambda)\\
			\bar y(\lambda)\\
			\bar z(\lambda)
		\end{pmatrix}
		\d\lambda
	\end{displaymath}
\end{inconstruction}


\paragraph{Scalar product}

Given two vectors $x,y \in R^n$ we will indicate their components using a
subscript index,
for example for $n=2$ we would have $x = (x_1, x_2)$.
We will write their \textsl{scalar product} using angle bracket notation
$\langle \cdot, \cdot \rangle$:
\begin{displaymath}
\langle x, y \rangle = \sum_{i=1}^n x_i y_i = xy^t,
\end{displaymath}
where the second equality signifies row-vector notation (vectors are thought
of as matrices of one row). Sometimes it's useful to inject an $n\times n$ matrix $M$ ``in the middle''
of a scalar product, defined as follows $\langle x, y \rangle_M := \langle M x, M y \rangle$.

An often useful construct is the following relation: given
three vectors $x,y,z \in \R^n$
\begin{displaymath}
\langle x,y \rangle \langle y,z \rangle
  = \left(x y^t\right)\left(y z^t\right)
  = x \big(y \otimes y\big) z^t
  = \langle x, z\rangle_y
\end{displaymath}
where the symbol $\otimes$ indicates the \textsl{outer product} defined as $x\otimes y :=
x^t y$. Here is an example in $\R^3$:
\begin{displaymath}
x\otimes y =
\left[
\begin{array}{ccc}
x_1 y_1 & x_1 y_2 & x_1 y_3 \\
x_2 y_1 & x_2 y_2 & x_2 y_3 \\
x_3 y_1 & x_3 y_2 & x_3 y_3 \\
\end{array}
\right].
\end{displaymath}


\paragraph{Scalar product of functions}
Given two functions $f,g:X\to\R$ we define their scalar product
$\langle f, g \rangle$ as
\begin{displaymath}
\langle f, g \rangle := \int_X f(x)g(x) \d x, \qquad \langle f, g \rangle_\mu := \int_X f(x)g(x)\mu(x) \d x.
\end{displaymath}

\begin{inconstruction}
	Discuss how scalar product and dot product are connected
	Discuss how scalar product and inner product are connected
	Explain how to integrate a vector-valued function like $W_{\XYZ}(\lambda)$ 
\end{inconstruction}

\paragraph{Norm of a function}
Given a function $f(x): X\to\R$ we will often speak about the integral norm over its
domain $X$, sometimes after weighting with a second positive valued function
$\mu(x): X\to\R^+$, this will be notated as follows
\begin{displaymath}
\|f\| := \int_X |f(x)| \d x, \qquad \|f\|_\mu := \int_X |f(x)| \mu(x) \d x
\end{displaymath}
it is sometimes useful to consider the $p$-norm of a function $f$:
\begin{displaymath}
\|f\|^p := \sqrt[p]{\int_X |f(x)|^p \d x}, \qquad \|f\|_\mu^p := \sqrt[p]{\int_X |f(x)|^p \mu(x)\d x}.
\end{displaymath}

In the case of a function $g(x): X\to\R^n$ we apply the relations above to
each component separately, for example, in the case of $n = 2$ we would have
$g(x) = (g_1(x), g_2(x))$, where $g_1,g_2:X\to\R$
\begin{displaymath}
\|g\|_\mu := \left(\|g_1\|_\mu, \|g_2\|_\mu\right) \in \R^2.
\end{displaymath}
